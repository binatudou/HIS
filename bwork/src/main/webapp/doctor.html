<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="lib/jquery-easyui-1.7.0/themes/default/easyui.css">
  <link rel="stylesheet" type="text/css" href="lib/jquery-easyui-1.7.0/themes/icon.css">
  <script type="text/javascript" src="lib/jquery-easyui-1.7.0/jquery.min.js"></script>
  <script type="text/javascript" src="lib/jquery-easyui-1.7.0/jquery.easyui.min.js"></script>
</head>

<body class="easyui-layout" fit="true" onload="load()">
  <div id="p" data-options="region:'west'" title="病人列表" style="width:30%;padding:10px">
    <ul id="undiagList" class="easyui-datalist" lines="true" striped="true" textField="patiName" valueField="registID" style="width:100%;height:50%"></ul>
    <ul id="diagList" class="easyui-datalist" lines="true" striped="true" textField="patiName" valueField="registID" style="width:100%;height:50%"></ul>
  </div>
  <div region="center" border="false" border="false">
    <div class="easyui-tabs" fit="true">
      <div title="看诊">
        <iframe id="registration-frame" width="100%" height="99%" src="diagnose.html" frameborder="0"></iframe>
      </div>
      <div title="开药">
        <iframe id="refund-frame" width="100%" height="99%" src="prescription.html" frameborder="0"></iframe>
      </div>
    </div>
  </div>

  <script>
    function load() {
      patiLoad();
    }

    //获取患者名单
    function patiLoad() {
      $.ajax({
        type: "GET",
        url: "docFindPati",
        dataType: "JSON",
        success: function(patiData) {
          undiagList.datagrid("loadData", patiData.undiagList);
          diagList.datagrid("loadData", patiData.diagList);
        },
        error: function(e) {
          console.log(e.status);
          console.log(e.responseText);
        }
      });
    }
  </script>
</body>

</html>